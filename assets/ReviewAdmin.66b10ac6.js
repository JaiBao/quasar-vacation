import{Q as D}from"./QTable.ad8b3c4f.js";import{aY as T,aL as k,r as n,U as m,S as x,W as F,X as C,Y as g,d as u,Q as _,F as U,aN as b}from"./index.ceb3bcee.js";import"./use-key-composition.2f75cb93.js";const Q={setup(){const f=k(),l=n(f.account),c=n(""),t=n(""),d=n(""),i=n(""),r=["\u4F8B\u5047","\u4E8B\u5047","\u75C5\u5047","\u516C\u5047","\u55AA\u5047","\u80B2\u5B30\u5047","\u7279\u4F11","\u5A5A\u5047","\u751F\u7406\u5047","\u7522\u5047","\u966A\u7522\u6AA2\u53CA\u966A\u7522\u5047","\u5B89\u80CE\u5047","\u80B2\u5B30\u7559\u8077\u505C\u85AA\u5047","\u5BB6\u5EAD\u7167\u9867\u5047"],o=m([]),s=n([]),h=[{name:"id",field:"id",label:"id",align:"left",sortable:!0},{name:"\u59D3\u540D",field:"name",label:"\u59D3\u540D",align:"center",sortable:!0},{name:"\u5047\u5225",field:"leaveType",label:"\u5047\u5225",sortable:!0},{name:"\u8D77\u59CB\u65E5\u671F",field:"startDate",label:"\u8D77\u59CB\u65E5\u671F",sortable:!0},{name:"\u7D50\u675F\u65E5\u671F",field:"endDate",label:"\u7D50\u675F\u65E5\u671F",sortable:!0},{name:"\u72C0\u614B",field:"state",label:"\u72C0\u614B",sortable:!0}],y=m([]),w=[{name:"id",field:"id2",label:"id",align:"left",sortable:!0},{name:"\u59D3\u540D",field:"name2",label:"\u59D3\u540D",align:"center",sortable:!0},{name:"\u5047\u5225",field:"leaveType2",label:"\u5047\u5225",sortable:!0},{name:"\u8D77\u59CB\u65E5\u671F",field:"startDate2",label:"\u8D77\u59CB\u65E5\u671F",sortable:!0},{name:"\u7D50\u675F\u65E5\u671F",field:"endDate2",label:"\u7D50\u675F\u65E5\u671F",sortable:!0},{name:"\u72C0\u614B",field:"state2",label:"\u72C0\u614B",sortable:!0}],v=async()=>{try{const e=await b.get("users/allvacation");console.log(e.data);let a=0;for(a=0;a<e.data.message.length;a++)e.data.message[a].state==="\u5BE9\u6838\u4E2D"?o.push({name:e.data.message[a].name,leaveType:e.data.message[a].leaveType,startDate:e.data.message[a].startDate,endDate:e.data.message[a].endDate,state:e.data.message[a].state,id:e.data.message[a]._id}):y.push({name2:e.data.message[a].name,leaveType2:e.data.message[a].leaveType,startDate2:e.data.message[a].startDate,endDate2:e.data.message[a].endDate,state2:e.data.message[a].state,id2:e.data.message[a]._id})}catch(e){console.log(e)}};v();const p=x();return{name:l,leaveType:c,startDate:t,endDate:d,leaveTypes:r,leaves:o,columns:h,submitForm:async()=>{try{const e=m({id:s.value[0].id,name:s.value[0].name,leaveType:s.value[0].leaveType,startDate:s.value[0].startDate,endDate:s.value[0].endDate,state:"\u5DF2\u6838\u51C6"}),a=await b.patch("/users/vacation/check",e);console.log(a),o.splice(0,o.length),v(),i.value="",l.value="",c.value="",t.value="",d.value=""}catch(e){p.notify({color:"red-4",textColor:"white",icon:"error",message:e.message||"\u767C\u751F\u932F\u8AA4"})}},selected:s,id:i,submitForm2:async()=>{try{const e=m({id:s.value[0].id,name:s.value[0].name,leaveType:s.value[0].leaveType,startDate:s.value[0].startDate,endDate:s.value[0].endDate,state:"\u4E0D\u6838\u51C6"}),a=await b.patch("/users/vacation/check",e);console.log(a),o.splice(0,o.length),v(),i.value="",l.value="",c.value="",t.value="",d.value=""}catch(e){p.notify({color:"red-4",textColor:"white",icon:"error",message:e.message||"\u767C\u751F\u932F\u8AA4"})}},leaves2:y,columns2:w}}},q={class:"q-pa-md text-right myMOUSE"},B={class:"row justify-end q-ma-lg"},S={class:"q-pa-md text-right myMOUSE"};function A(f,l,c,t,d,i){return F(),C(U,null,[g("div",q,[u(D,{id:"reviewtable",title:"\u5F85\u5BE9\u6838\u5047\u55AE",rows:t.leaves,columns:t.columns,"row-key":"id",selection:"single",selected:t.selected,"onUpdate:selected":l[0]||(l[0]=r=>t.selected=r),"virtual-scroll":""},null,8,["rows","columns","selected"]),g("div",B,[u(_,{icon:"check",color:"green",label:"\u8A31\u53EF",onClick:t.submitForm},null,8,["onClick"]),u(_,{icon:"close",color:"red",label:"\u62D2\u7D55",onClick:t.submitForm2},null,8,["onClick"])])]),g("div",S,[u(D,{id:"reviewtable",title:"\u5DF2\u5BE9\u6838\u5047\u55AE",rows:t.leaves2,columns:t.columns2,"row-key":"id",selected:t.selected,"onUpdate:selected":l[1]||(l[1]=r=>t.selected=r)},null,8,["rows","columns","selected"])])],64)}var R=T(Q,[["render",A]]);export{R as default};
